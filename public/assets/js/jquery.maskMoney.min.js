!function(e){"use strict";e.browser||(e.browser={},e.browser.mozilla=/mozilla/.test(navigator.userAgent.toLowerCase())&&!/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.webkit=/webkit/.test(navigator.userAgent.toLowerCase()),e.browser.opera=/opera/.test(navigator.userAgent.toLowerCase()),e.browser.msie=/msie/.test(navigator.userAgent.toLowerCase()),e.browser.device=/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase()));var t={prefix:"",suffix:"",affixesStay:!0,thousands:",",decimal:".",precision:2,allowZero:!1,allowNegative:!1,doubleClickSelection:!0,allowEmpty:!1,bringCaretAtEndOnFocus:!0},n={destroy:function(){return e(this).unbind(".maskMoney"),e.browser.msie&&(this.onpaste=null),this},applyMask:function(t){var n=e(this).data("settings");return a(t,n)},mask:function(t){return this.each(function(){var n=e(this);return"number"==typeof t&&n.val(t),n.trigger("mask")})},unmasked:function(){return this.map(function(){var t,n=e(this).val()||"0",r=-1!==n.indexOf("-");return e(n.split(/\D/).reverse()).each(function(e,n){if(n)return t=n,!1}),n=(n=n.replace(/\D/g,"")).replace(RegExp(t+"$"),"."+t),r&&(n="-"+n),parseFloat(n)})},unmaskedWithOptions:function(){return this.map(function(){var n=e(this).val()||"0",r=e(this).data("settings")||t,a=RegExp(r.thousandsForUnmasked||r.thousands,"g");return n=n.replace(a,""),parseFloat(n)})},init:function(n){return n=e.extend(e.extend({},t),n),this.each(function(){var t,i,o=e(this);function l(){var e,t,n,r,a,i=o.get(0),l=0,s=0;return"number"==typeof i.selectionStart&&"number"==typeof i.selectionEnd?(l=i.selectionStart,s=i.selectionEnd):(t=document.selection.createRange())&&t.parentElement()===i&&(r=i.value.length,e=i.value.replace(/\r\n/g,"\n"),(n=i.createTextRange()).moveToBookmark(t.getBookmark()),(a=i.createTextRange()).collapse(!1),n.compareEndPoints("StartToEnd",a)>-1?l=s=r:(l=-n.moveStart("character",-r),l+=e.slice(0,l).split("\n").length-1,n.compareEndPoints("EndToEnd",a)>-1?s=r:(s=-n.moveEnd("character",-r),s+=e.slice(0,s).split("\n").length-1))),{start:l,end:s}}function s(e){var n,r,i=o.val().length;o.val(a(o.val(),t)),n=o.val().length,t.reverse||(e-=i-n),r=e,!t.formatOnBlur&&o.each(function(e,t){if(t.setSelectionRange)t.focus(),t.setSelectionRange(r,r);else if(t.createTextRange){var n=t.createTextRange();n.collapse(!0),n.moveEnd("character",r),n.moveStart("character",r),n.select()}})}function c(){var e=o.val();if(!t.allowEmpty||""!==e){var n=isNaN(e)?e.indexOf(t.decimal):e.indexOf(".");if(t.precision>0){if(n<0)e+=t.decimal+Array(t.precision+1).join(0);else{var r=e.slice(0,n),i=e.slice(n+1);e=r+t.decimal+i+Array(t.precision+1-i.length).join(0)}}else n>0&&(e=e.slice(0,n));o.val(a(e,t))}}function u(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function d(n){var r,a,i,s,c,d,v,p,g=(n=n||window.event).which||n.charCode||n.keyCode,h=t.decimal.charCodeAt(0);if(void 0===g)return!1;if((g<48||g>57)&&(g!==h||!t.reverse))return function n(r,a){if(45===r){var i;return o.val((i=o.val(),t.allowNegative?""!==i&&"-"===i.charAt(0)?i.replace("-",""):"-"+i:i)),!1}return 43===r?(o.val(o.val().replace("-","")),!1):13===r||9===r||!!e.browser.mozilla&&(37===r||39===r)&&0===a.charCode||(u(a),!0)}(g,n);if(i=!(o.val().length>=o.attr("maxlength")&&o.attr("maxlength")>=0),c=(s=l()).start,d=s.end,v=!!(s.start!==s.end&&o.val().substring(c,d).match(/\d/)),p="0"===o.val().substring(0,1),!i&&!v&&!p)return!1;return!(g===h&&(r=o.val().length,a=l(),(0!==a.start||a.end!==r)&&o.val().indexOf(t.decimal)>-1))&&(!!t.formatOnBlur||(u(n),f(n),!1))}function f(e){var t,n,r,a,i=(e=e||window.event).which||e.charCode||e.keyCode,c="";i>=48&&i<=57&&(c=String.fromCharCode(i)),n=(t=l()).start,r=t.end,a=o.val(),o.val(a.substring(0,n)+c+a.substring(r,a.length)),s(n+1)}function v(){setTimeout(function(){c()},0)}function p(){return(parseFloat("0")/Math.pow(10,t.precision)).toFixed(t.precision).replace(RegExp("\\.","g"),t.decimal)}t=e.extend({},n),t=e.extend(t,o.data()),o.data("settings",t),e.browser.device&&o.attr("type","tel"),o.unbind(".maskMoney"),o.bind("keypress.maskMoney",d),o.bind("keydown.maskMoney",function e(n){var r,a,i,c,d,f=(n=n||window.event).which||n.charCode||n.keyCode;return void 0!==f&&(a=(r=l()).start,i=r.end,8!==f&&46!==f&&63272!==f||(u(n),c=o.val(),a===i&&(8===f?""===t.suffix?a-=1:(d=c.split("").reverse().join("").search(/\d/),i=(a=c.length-d-1)+1):i+=1),o.val(c.substring(0,a)+c.substring(i,c.length)),s(a),!1))}),o.bind("blur.maskMoney",function n(a){if(e.browser.msie&&d(a),t.formatOnBlur&&o.val()!==i&&f(a),""===o.val()&&t.allowEmpty)o.val("");else if(""===o.val()||o.val()===r(p(),t))t.allowZero?t.affixesStay?o.val(r(p(),t)):o.val(p()):o.val("");else if(!t.affixesStay){var l=o.val().replace(t.prefix,"").replace(t.suffix,"");o.val(l)}o.val()!==i&&o.change()}),o.bind("focus.maskMoney",function e(){i=o.val(),c();var n,r=o.get(0);t.selectAllOnFocus?r.select():r.createTextRange&&t.bringCaretAtEndOnFocus&&((n=r.createTextRange()).collapse(!1),n.select())}),o.bind("click.maskMoney",function e(){var n,r=o.get(0);!t.selectAllOnFocus&&(r.setSelectionRange&&t.bringCaretAtEndOnFocus?(n=o.val().length,r.setSelectionRange(n,n)):o.val(o.val()))}),o.bind("dblclick.maskMoney",function e(){var n,r,a=o.get(0);a.setSelectionRange&&t.bringCaretAtEndOnFocus?(r=o.val().length,n=t.doubleClickSelection?0:r,a.setSelectionRange(n,r)):o.val(o.val())}),o.bind("cut.maskMoney",v),o.bind("paste.maskMoney",v),o.bind("mask.maskMoney",c)})}};function r(e,t){var n="";return e.indexOf("-")>-1&&(e=e.replace("-",""),n="-"),e.indexOf(t.prefix)>-1&&(e=e.replace(t.prefix,"")),e.indexOf(t.suffix)>-1&&(e=e.replace(t.suffix,"")),n+t.prefix+e+t.suffix}function a(e,t){return t.allowEmpty&&""===e?"":t.reverse?function e(t,n){var a,o=t.indexOf("-")>-1&&n.allowNegative?"-":"",l=t.replace(n.prefix,"").replace(n.suffix,""),s=l.split(n.decimal)[0],c="";if(""===s&&(s="0"),a=i(s,o,n),n.precision>0){var u=l.split(n.decimal);u.length>1&&(c=u[1]),a+=n.decimal+c;var d=Number.parseFloat(s+"."+c).toFixed(n.precision).toString().split(n.decimal)[1];a=a.split(n.decimal)[0]+"."+d}return r(a,n)}(e,t):function e(t,n){var a,o,l,s=t.indexOf("-")>-1&&n.allowNegative?"-":"",c=t.replace(/[^0-9]/g,""),u=c.slice(0,c.length-n.precision);if(a=i(u,s,n),n.precision>0){if(!isNaN(t)&&t.indexOf(".")){var d=t.substr(t.indexOf(".")+1);c+=Array(n.precision+1-d.length).join(0),a=i(u=c.slice(0,c.length-n.precision),s,n)}o=c.slice(c.length-n.precision),l=Array(n.precision+1-o.length).join(0),a+=n.decimal+l+o}return r(a,n)}(e,t)}function i(e,t,n){return""===(e=(e=e.replace(/^0*/g,"")).replace(/\B(?=(\d{3})+(?!\d))/g,n.thousands))&&(e="0"),t+e}e.fn.maskMoney=function(t){return n[t]?n[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.maskMoney"):n.init.apply(this,arguments)}}(window.jQuery||window.Zepto);